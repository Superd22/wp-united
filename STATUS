To fix/change for v0.8.5
---------------------
- avatar not synced when deleted by user in UCP
- WP header and footer appearing in phpBB ajax chatboxes
- main install / upgrade file contains subsilver file copies -- remove and check
- account for logged in user keeps being created in usermapper, immediately after account break?
- when creating phpBB user account in usermapper, don't just do nothing silently if phpBB username doesn't validate
- relax wordpres username 'admin' restrctions -- map them to phpBB account in setup wizard
- add option to show post excerpt to posts / topics widget/tag (first 20 words)
- test capturing server 500 errors and display nicer message on connection install

- post to blog button
- Migrate widgets to new syntax

- Last post time reported different from topic time
- Cross-posted post reported not read, even after reading

- Move authentication out to module, check with WP Super Cache
- Allow guest commenting
- add username colours to topics, posts & loginuserinfo widget

$_SERVER['DOCUMENT_ROOT'] unreliable as source for path computation on open_basedir restricted servers
? author permalinks not working if author permalink with space in username

wpu-plugin should halt if installLevel is < 10, or if version doesn't match, to prevent users from using WP-United  at all if they haven't got past Step 5 of the Setup Wizard.
wpu_get_xposted_details called multiple times on page view (comments_open, comment load). Result should be cached.
Check "posts since last visit" algorithm

Enhancements:
On install, if blank page or server 500, automatically run again with wp_debug options turned on
Add forum selection option to widget control panel for latest posts and topics widgets
user blogs: show only my posts for author or below: http://www.wp-united.com/viewtopic.php?f=9&t=2063
WP dashboard recent comments integration with xposted comments
When grepping <title>, check if more than one exists. If so, ignore any commented ones.




Potential changes / Watch issues
-------------------------------------------
- one user reports getting logged out upon leaving comment in WP
- one user reports broken "reply" links in theme.
- received transient error on first xpost(updated post to be forced xpost not previously xposted): Fatal error: Cannot redeclare validate_username() (previously declared in /var/www/wp-united/buildenv/wpu-buildenv/workspace/phpbb/includes/functions_user.php:1452) in wp-includes/registration.php on line 53
- characters too few error on cross-post reported. Cannot reproduce - -waiting for additional reports
- override of "must log in" relies on themes checking WP's "must log in to post comment" option (e.g. Arras doesn't).
- New idea: auto-log-out of WP  after setup wizard first install if user selected integration

FIXED/COMMITTED FOR v0.8.5
----------------------------------------
- Suppress errors during path detection, etc, for people with open_basedir restrictions
- If forum and blog are both in root directory, add explicit "index.php" to the forum link.
- added _wpu_add_class -- a way to add class names to widget elements
- Added more classes to the login / userinfo widget to facilitate styling.
- New option: cross-post excerpts or full posts. Three choices: Excerpt / full post / ask each time
- Removed inline JavaScript for smilies -- only inline JS needed is for language strings. All WP-United JS moved to wp-united/js/wpu-min.js
- Fixed tags/categories not showing up properly on cross-posted posts
- Added class names for each forum ID in latest topic/posts widgets.
- Fixed plugin_fixer globals assigner
- show "cross-post" in past tense in force xpost box if already xposted.
- added two new options, SHOW_BLOG_LINK, and WPU_INTEG_DEFAULT_STYLE -- full info in options.php
- Fixed problem links in reverse integration, e.g. on phpBB FAQ page
- fixed uncategorized checked when selecting cross-posting
- changed <br /> and <p> BBCode translations to \n rather than [br]
- Stopped allowing submission of blank xposted comments
- Fixed smiley path in cross-posted comments sometimes not correct (http://www.wp-united.com/posting.php?mode=edit&f=15&p=8352)
- User mapper is now case insensitive when looking for suggested phpBB username matches

FIXED/COMMITTED FOR v0.8.4.1
----------------------------------------
- Added f query var to post links in latest topics widget
- dbms needs to be global when invoking phpBB




FIXED/COMMITTED FOR v0.8.4
----------------------------------------
- Check phpbbForum outside WP before accessing class in case user deactivated wpu-plugin
- When cross-posting comment if logged out, comment was silently going to WordPress
- Added better error catching for people who don't install the mod properly (e.g. if they activate the plugin without installing/setting up, or run it without the plugin)
- Fixed comments closed for global announcements when they shouldn't be. wpu_comments_open() using old permschecked code, but phpBB api still isn't clear on how to determine global announcemnt privileges
- Fixed unreliable comment display date/time by converting to MySQL datetime from phpBB
- wpu-install.php removed. Actions moved to wp-united/installer.php, and are run automatically for founder users
- Force comments closed for forum page
- Timezone issues with cross-posts fixed -- again -- finally
- Fixed blog list template tag dying when it should paginate
- Fixed unfriendly error if WP path is incorrect
- Refined phpbb/WP database switching to remove PHP notices that occur under some circumstances
- Improved BBCode & magic URL checking
- Stop double-pass of make clickable
- Updated old SQL in blog list to ensure correct pagination after posts have been deleted
- Fixed breaking validation of IMG tags with bbcode fix in image magic turned on
- Fixed spurious cache error on post edit
- Post editing permissions now fixed: username is not transferred to user doing the editing. Edit permissions checked in the forum
- When calling login_userinfo template tag, it can now be called multiple times with different options without wasting resources
- Fixed integration error after updating password or username
- Widget logout status: checks phpBB status rather than WordPress status
- Fixd loginuserinfo template tag not showing logged out status properly


FIXED / COMMITTED for v0.8.3:
-------------------------------------------
- Slight cleanup of wp-integration-class.php user arbitration, to remove logged error notices
- Cleaned up notices
- Fixed plugin fixes sometimes move fixed include path onto comment line
- Fixed comments should not try to load if $post is blank
- Fixed default WP avatar broken
- Fixed avatar syncing for integrated users
- Fixed RSS feeds not showing correctly for WordPress-in-phpBB
- Fixed comment  links on non-cross-posted comments
- Prevented phpBB from trying to do gzip compression twice.
- Suppressed PHP timezone warnings under PHP 5.3 by setting default timezone in phpBB, since WP does it anyway
- Editing cross-posts that have become sticky or announcements now preserves their status
- Fixed missing "delete from WordPress" option in user mapper, broken "next page" button and repeated text.

FIXED / COMMITTED for v0.8.2:
-----------------------------------------
- Fixed display of Style Keys in Debug Info to Post via auto JS dropdown
- Style Keys are now purged with the cache (they have the tendency to grow huge with CSS magic on and lots of templates)
- Added additional checks to hook to try to ensure we only act upon a true page $template in a reverse integration
- Fixed $redir breaks append_sid missing for logout links
- Fixed buffer check not working with php.ini zlib compression
- Fixed smilies insertion JS. Now makes intelligent guess about location of textarea, and is minified better
- Fixed error on RSS feed page when feeds disabled
- Fix for object elements with height attribute set being borked by CSS magic
- New, improved regex for fixing height attribute -- now fixed any html elements it finds, and works with existing style attributes
- Added default options to login/user info template tag
- Changed behaviour when board disabled: blog.php always calls wp_die when disabled, as there is no other reliale way to integrate templates or pull info
- Fixed $user->add_lang firing too often
- Fixed CSS Magic not removing " fom image URLs in stylesheets
- return default wordpress status for comments_open if user is logged out
- Override option for comment_registration for cross-posted comments
- Fixed login link for comments page
- Cross-posted comments now redirect back to WP 
- (Edit) links in cross-posted comments now point to forum
- Comment title links now point to forum
- stopped phpBB's deregister_globals() from unregistering $template on theme change.
- New Swedish translation
- Seed $data['topic_title'] in cross-posted comment, otherwise truncate_string calls WP's version of htmlspecialchars_decode on empty string in PHP4, which triggers error.
- Fixed default currLoc option in wpu_compute_path_difference
- Cross-post timezone not set correctly -- fixed by setting storage date to UTC
- Fixed naming of $compat assignment in plugin class
- Integration class: Check var is set before unsetting
- Plugin fixer was not stepping into all fixable files. Fixed
- Fixed default avatar options in built-in avatars. 
- Added error handler arbitrator to suppress notices in WordPress. Tested in php 5.3
- stop unsetting $template in wpUtdInt
- Fixed broken trigger_errors in wp-integration-class
- Fixed broken phpBB avatars
- Made naming of enter_if_out and Leave_if_just_entered public, since we are using them that way already (but their use should be restricted)

FIXED / COMMITTED for v0.8.1:
----------------------------------------
- Forum posts widget link  has extra .php (http://www.wp-united.com/viewtopic.php?f=19&t=1938)
- Latest forum posts widget shows too many posts (http://www.wp-united.com/viewtopic.php?f=15&t=1940&p=6217#p6217)
- xposted comments permission check incorrect (http://www.wp-united.com/posting.php?mode=reply&f=14&t=1929)
- force hook file to be loaded in wpu-install if cache has not been purged
- cross-posted posts that later become global announcements can now be edited/commented on
- fixed missing .php in users online widget links
- fixed gzip handler in reverse forum integration
- Added WordPress user ID to cross-posted comment metadata so that avatar tags, etc. can work
- Fixed missing base href in users online widget links
- fixed error messages not being suppressed in installer backend (http://www.wp-united.com/viewtopic.php?f=5&t=1922&p=6231#p6231 , http://www.wp-united.com/viewtopic.php?f=14&t=1956)
- Fixed missing $template in usermap when no mappable users
- Fixed AJAX not catching all errors (http://www.wp-united.com/viewtopic.php?f=14&t=1956)
- Improved outdated description and suggestions around simple/full reverse integration in ACP
- Fixed template cache not blocked, preventing template showing on profile update, on simple reverse integration (http://www.wp-united.com/viewtopic.php?f=15&t=1942&p=6226#p6226)
- Latest forum posts widget now uses phpBB time format / timezone  http://www.wp-united.com/viewtopic.php?f=15&t=1912
- Fixed login redirect link in widget / template tag
- Fixed missing user ID in comment author url of cross-posted comment
- Fixed trigger_error in wpu_install.php
- Improved "please wait" behaviour in ACP step 5 / settings
- Removed extraneous colons in Debug Info to Post
- Fixed missing uninstall strings
- Fixed comments login link login link in comments broken http://www.wp-united.com/viewtopic.php?f=14&t=1935&p=6199#p6199
- Added check for missing hook in blog.php, tries to auto-purge cache.
- Fixed broken ACP donate page



Deferred to v0.9:
----------------------
Kill blog.php if we can -- extend phpbb.php to complete compatibility class
When cross-posting a blog-post that already contains comments, with cross-posting turned on, ask user what to do with the comments
Comment redirect should take into account comment order and page (see @todo in comments.php)
Add proper timeouts to ACP AJAX
Check that WP permalinks setting is commensurate with WP-United wpUri setting.
wpu-plugin should be handling login/logout, rather than $wpUtdInt. wp-login redirects will then be more reliable
Cache: WordPress version can be auto-filled -- and WPINC should be dynamic when calculating file path
Use phpBB hook file to include WordPress first, making scope always global
Remove need for blog.php by handling all function collisions is phpBB via the above
Store all sleeping phpBB vars in phpbbForum abstraction, move away from wp-integration-class for handling phpBB state
ACP: Ditch wizard, put settings page into 4 jquery ui tabs, with next/back buttons and a 
submit button on the 4th (or ensure all tabs read on first install).
ACP: Compatibility / Performance slider
Widgets: Add birthdays widget
Widgets: Add AJAX backend framework
style fixer: Try to pull page with fixed links from cache -- perhaps based on quick hash of header content? (unlikely)
Template funcs: Move more phpBB code to phpBB abstraction
Template tags / widget: phpBB "function bar"
Overall architecture: Plugin fixes extend more general compatibility class -- to allow for simple "compatibility slider" in v0.9
To allow for redirects on logout, buffer ucp.php via proxy file
Cache: Make core/template calls follow same structure as css magic / template voodoo
 ACP: split out "advanced" options to simplify install
 Plugin: JavaScript and CSS should be enqueued
 Plugin bugs: have_comments() is returning false when yaapc comments are enabled. Same issue when wpu-plugin is disabled, so may not be a wpu issue.
$_SID is not getting set, so append_sid() does nothing without forced param
should be easy way to check if user is integrated, e.g. phpbbForum->user_is_integrated()

=============================================











DONE / COMMITTED (v0.8.0)
--------------------------------------
- See SVN changelog for complete list
- Plugin-fixes: Recursive includes should only operate on files under wpu-plugin
- Plugin-fixes: Dynamic global variables detection
- Plugin fixes: Repeat for WPMU plugins
- Plugin fixes: Combine themes functions.php etc with plugin fixes
- Split WP page invocation in integration class to 'prepare' and 'do_'
- Removed wp-template-loader.php in favour of parsing WordPress code
- Widgets: Cleaned up latest forum posts template func and widget
- Widgets/template funcs: latest topics & posts now nice and compliant, added some css selectors, removed all redundant markup
- Disabled title munging on full reverse page
- Fixed all styling and args in all widgets and template funcs
- Added new "users online" widget
- style filename cache auto-clears if CSS Magic is disabled.
- ACP: Fixed invalid ajax responses, improved error capturing
- Cache: WP-United version auto-filled
- CSS Magic / template voodoo: Filename hashes use cache class and are unguessable
- Hooks and setup when installLevel < 10 checked
- CSS Magic: Remove reset stylesheet application from CSS magic backend
- Fixed cache/db unload on forward integration
- CSS Magic: Hardened and cleaned up wpu-style-fixer
- CSS Magic - cleaned up style.php actions
- CSS Magic: only replace outer links if template voodoo is active
- CSS Magic - combined wpu-style-fixer and style.php actions
- Renamed several files to improve consistency and make it more obvious what their function is.
- Fixed for WP 2.9
- Added easy option in options.php to disable WP-United template integration to prevent lock-outs
- Cross-posting: Complete re-realisation: 
	- Cross-posted posts can now be edited
	- Cross-posted status is now checked properly, not via form fields
	- Follow-up posts in the forums now replace WordPress comments (TODO: Add option)
	- Comments via the WordPress comment box now go to the forum if the blog post is cross-posted
- Beginning to kill wpuAbs, and replacing with $phpbbForum. TODO: Don't kill $user unless absolutely necessary
- $phpbbForum handles the current state of the integration. $phpbbForum->enter() and $phpbbForum->leave() MUST be called properly before accessing phpBB features from WordPress
- phpBB is now always run, even in the dashboard. (It was anyway, but as a result of convoluted logic, and couldn't e relied upon)
- phpBB varialbes like phpbb_root_path and $phpEx are now consistently available, everywhere. The only ones missing are $user and $cache -- get those via $phpbbForum or phpbbForum->enter()
- New comment and comments class load up phpBB comments into a format edible to WordPress
- Removed all wpuAbs, apart from err_msg, from ACP
- Removed passVars and passBlockVars from ACP. TODO: stop using block vars for conditionals
- Added new cross-posting options, and re-worded cross-posting options. TODO: Link them to new x-posting code
- Most use of wp-united-connection-settings in wpu-plugin removed, as we can now just use $wpSettings and phpbb_root_path everywhere. TODO: normalise scriptPath everywhere!
- Per-user blogs widgets only registered if per-user blogs are enabled
- new cross-posting options now work
- cross-posting comments auto-link fixed as post_id != topic_id
- Fixed core cache being generated every time
- Cache: Added .htaccess to package
- CSS Magic: Template Voodoo fixed (Width of phpBB in Solostream WP-Genius)
- Improved full page reverse integration: auto-insert a Forum page in WordPress
- Language strings: Using phpBB i18n via phpbbForum for all strings, including in wpu-plugin, template-tags and widgets
- ACP: Settings process page fixed
- ACP: Settings page uses AJAX split to install WP-United Connection
- Plugin: Forum page link filtered so that it always goes directly to the forum
- replaced $scriptPath with new $phpbbForum->url, everywhere. This will also remove a lot of the path guesswork in various places.
- ACP: Fixed error trapping function on PHP4
- Forum page used for simple hdr ftr, not only full page.
- WP-united cache is now purged when the "purge cache" button is clicked in the phpBB ACP. It is also auto-purged when the wizard is run.
- Fixed debug page
- Fixed user mapping tool
- Removed .php for $phpEx in wpu-plugin.php
- Fixed redirection on wp-united reset not working
- Fixed duplicate phpBB displayed when installLevel = uninstalled
- CSS first option not properly defaulted on install or reset -- fixed.
- Fixed login inaccessible when board is disabled
- Completely removed wpuAbs -- yay. Some things may be broken -- lots of testing needed
- Fixed broken WP Login / logout etc. links
- removed $phpbb_sid, etc, and wpuGetxxx from integrator.php
- Plugin: Logout etc. links now showing in dashboard (thanks JG)
- bbCode now works in cross-posted comments
- dates fixed in cross-posting
- Comment counts fixed
- Comment redirection and preventing WordPress post on phpBB cross-posted comments working
- New forum page option on step 1 auto-creates forum link page in WordPress, rather than it being turned on only for reverse template integrations.
- Fixed widget control panes not showing
- Fixed new widget bugs due to new phpB lang
- Fixed ACP link and logout in userinfo widget. However, in general this is failing because $_SID is not getting set, so append_sid() does nothing TODO: check
- Editing posts using quick Edit now updates the cross-posted post too
- Proper fix for editing of profile fields in phpBB & WP in progress:
- Added links to edit phpBB profile or administer user in users.php if that user is integrated 
- Reinstated buffering of profile.php and user-edit.php when that user is integrated
- Added phpbb message to profile.php and user-edit.php if that user is integrated
- Added phpBB general message to users.php
- Fixed settings menu
- removed use of conn settings full_path_to_plugin
- ACP: Removed unnecessary wpu connection parameters that we aren't using any more
- Fixed login debugging not showing up
- CSS Magic now checks filemtime
- Fixed style keys not available in style.php causing cache to be regenerated each time
- Fixed errors in wpu-install.php
- wpu-install.php npow only works for founder users, and uses the phpBB template system
- Fixed error on user registration
- Removed "Header fix" option from integrator and ACP
- Removed "phpBB styles first?" option from ACP, split to two separate advanced options in options.php
- ACP: wpu-plugin copy reports success if filemtime of copied file is equal or newer -- no longer looks for magic variable in header
- Now officially supports subdomains (or even completely different domains with the appropriate mod installed) -- warning wording changed in ACP
- Plugin workarounds can now be enabled (or disabled) with one click on step 5 of the wizard if the install fails.
- WP-United dashboard menu improved: submenus now selected properly
- Fixed various errors in user blog theme panel
- Fixed blog settings panel, renamed to "Your blog details"
- Fixed userblog list last entry calculation and RSS feed lang string
- Various improvements and fixes to CSS Magic after testing cross-browser. More work will need to be done in future releases for 100% theme compatibility in shitty browsers.
- Fixed error on blank permissionsList child arrays
- Forum page is now properly selected on reverse integrated page, even with simple header/footer
- Fixed broken DTD language strings
- User nickname, display_name and nicename are only set once, when the integrated account is created
- Added topic locked / unapproved check for cross-posting comments
- Removed phpbbForum->err_msg
- Update all file headers and copyrights
- Cross-posting: Don't show comment box if impossible to xpost comment
- fixed incorrect recording of wpu_last_post
- Added phpBB censoring (if selected) to phpBB forum posts + topics widgets, and user blog titles + taglines
- When cross-posting scheduled or previously-published WP posts, date/time is now correct
- scheduling a post that cross-posts now works -- and is now cross-posted by wp-cron with the correct user permissions
- replaced redirection for wp-login -- behaviour can be set in options.php
- Fixed phpBB user not created in user mapping tool
- Made comments count backward compatible with WP 2.8 and earlier
- Minor compatibility tweaks for WP 2.8x
