In progress
--------------

TODO
-- clean up login-integrator
-- validate_user_conflict function will work with func_get_args, so re-implement it
-- once settings panels are ready, split into separate files in subfolder
-- simplify mod-settings into single array
-- Set enabled / disabled -- do not enter phpBB unless "enabled" or $_GET--transmit are set
-- disable submit button until path is chosen
-- change hook flow
-- uninstall and/or disable buttons

MIGRATION ACTIONS:
- remove old settings in WP & phpBB
- remove old widget options
- remove a_wpu_manage permission
- remove ACP modules



clean up wp-runner / integrator split
logout etc to use comms frame


TODO -- remaining from killing blog.php:
	
	
	
- make_clickable removal still needs to run on rev int pages, conn install, etc.
- $H$/$P$ substitution can take place in hasher override -- no need to do elsewhere. Can check password hashed here, no need to use define			
- Check wp_check_password override!

- move wp_change_username somewhere better
- consider manually doing make_clickable() on xposted comment text

- add upgrade instructions for people using blog.php


Other changes
---------------------
- duplicate stylekeys config entries error
- when creating phpBB user account in usermapper, don't just do nothing silently if phpBB username doesn't validate
- relax wordpres username 'admin' restrctions -- map them to phpBB account in setup wizard

- add option to show post excerpt to posts / topics widget/tag (first 20 words)
- WP Super Cache is looking for WP cookie -- get it to check for phpBB cookie too, or set WP cookie on phpBB cookie set?






- post to blog button
- Migrate widgets to new syntax

- Last post time reported different from topic time
- Cross-posted post reported not read, even after reading

- Move authentication out to module, check with WP Super Cache
- Allow guest commenting
- add username colours to topics, posts & loginuserinfo widget

$_SERVER['DOCUMENT_ROOT'] unreliable as source for path computation on open_basedir restricted servers
? author permalinks not working if author permalink with space in username

wpu-plugin should halt if installLevel is < 10, or if version doesn't match, to prevent users from using WP-United  at all if they haven't got past Step 5 of the Setup Wizard.
wpu_get_xposted_details called multiple times on page view (comments_open, comment load). Result should be cached.
Check "posts since last visit" algorithm

Enhancements:
On install, if blank page or server 500, automatically run again with wp_debug options turned on
Add forum selection option to widget control panel for latest posts and topics widgets
user blogs: show only my posts for author or below: http://www.wp-united.com/viewtopic.php?f=9&t=2063
WP dashboard recent comments integration with xposted comments
When grepping <title>, check if more than one exists. If so, ignore any commented ones.

Fixed/Committed for vNext
------------------------------------

Check that function update_option exists when installing connection -- if not, balk
Internalising of integrated login into wordpress -- in progress
- search for all $wpUtdInt->integrate_logins and remove (done)
- Remove reliance on overridden wp functions: (DONE)
	-- move hasher to login-integrator (done)
			- TODO: instead of multiple defines, set once (reduced as much as possible)
			- TODO: check that hasher override overrides in time. (done, moved)
			- TODO: remove registration.php stuff from wp-functions. (done) HOWEVER: need to handle validate_username conflict
					- Can just rename phpBB's validate_username if a marker is set (done)
	-- kill make_clickable from wp-functions: rename it in phpBB and add alias function if not defined. (done)
	Login debug moved to new generic debugger class
- Set define (WPU_DISABLE_LOGIN_INT) for bypassing integrated login -- we don't want it to happen in user mapper, etc. 
- Removed blog.php, blogsUri option
- forward template integration now works again without blog.php
- Fixed absolute phpbb_root_path breaks phpBB URLs in forward template integration
- wordpress now always run in global scope for reverse integration (but header/footer called locally)
- Moved ACP panel to wordpress. Settings not yet transferred --need to repackage mod and transfer over settings
- settings now being transferred to phpBB. TODO: simplify mod-settings into single array