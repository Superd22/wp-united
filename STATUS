Actions remaining for release of v0.8
-------------------------------------------------
This is more of a general todo list so that I (John) can prioritise changes 
and (try to) stick to a release date. See code documentation for a full list of @todos. 
Al full list of bugs is in the forum bug tracker.
The "DONE" section only contains changes in the final run-up to release

TODO
--------

Cross-posting: Don't show comment box if impossible to xpost comment
test that adding phpBB user in user map still works
Remove phpbbForum->err_msg with plan trigger_error or wp_die -- it is a throwback to wpuAbs

ACTIONS FOR RELEASE
------------------------------

Fresh install test
Remove pre 2.7 paths / update description
Install to wp-united.com
Update all file headers and copyrights
Check no Windows line endings have crept in
Switch SVN branch to release
remove STATUS file
Update release notes
Plea for help with user manual
Announce


Deferred to v0.9:
----------------------
Cache: WordPress version can be auto-filled -- and WPINC should be dynamic when calculating file path
Use phpBB hook file to include WordPress first, making scope always global
Remove need for blog.php by handling all function collisions is phpBB via the above
Store all sleeping phpBB vars in phpbbForum abstraction, move away from wp-integration-class for handling phpBB state
ACP: Ditch wizard, put settings page into 4 jquery ui tabs, with next/back buttons and a 
submit button on the 4th (or ensure all tabs read on first install).
ACP: Compatibility / Performance slider
Widgets: Add birthdays widget
Widgets: Add AJAX backend framework
style fixer: Try to pull page with fixed links from cache -- perhaps based on quick hash of header content? (unlikely)
Template funcs: Move more phpBB code to phpBB abstraction
Template tags / widget: phpBB "function bar"
Overall architecture: Plugin fixes extend more general compatibility class -- to allow for simple "compatibility slider" in v0.9
To allow for redirects on logout, buffer ucp.php via proxy file
Cache: Make core/template calls follow same structure as css magic / template voodoo
 ACP: split out "advanced" options to simplify install
 Plugin: JavaScript and CSS should be enqueued
 Plugin bugs: have_comments() is returning false when yaapc comments are enabled. Same issue when wpu-plugin is disabled, so may not be a wpu issue.
$_SID is not getting set, so append_sid() does nothing without forced param

=============================================

DONE / COMMITTED
-------

- See SVN changelog for complete list
- Plugin-fixes: Recursive includes should only operate on files under wpu-plugin
- Plugin-fixes: Dynamic global variables detection
- Plugin fixes: Repeat for WPMU plugins
- Plugin fixes: Combine themes functions.php etc with plugin fixes
- Split WP page invocation in integration class to 'prepare' and 'do_'
- Removed wp-template-loader.php in favour of parsing WordPress code
- Widgets: Cleaned up latest forum posts template func and widget
- Widgets/template funcs: latest topics & posts now nice and compliant, added some css selectors, removed all redundant markup
- Disabled title munging on full reverse page
- Fixed all styling and args in all widgets and template funcs
- Added new "users online" widget
- style filename cache auto-clears if CSS Magic is disabled.
- ACP: Fixed invalid ajax responses, improved error capturing
- Cache: WP-United version auto-filled
- CSS Magic / template voodoo: Filename hashes use cache class and are unguessable
- Hooks and setup when installLevel < 10 checked
- CSS Magic: Remove reset stylesheet application from CSS magic backend
- Fixed cache/db unload on forward integration
- CSS Magic: Hardened and cleaned up wpu-style-fixer
- CSS Magic - cleaned up style.php actions
- CSS Magic: only replace outer links if template voodoo is active
- CSS Magic - combined wpu-style-fixer and style.php actions
- Renamed several files to improve consistency and make it more obvious what their function is.
- Fixed for WP 2.9
- Added easy option in options.php to disable WP-United template integration to prevent lock-outs
- Cross-posting: Complete re-realisation: 
	- Cross-posted posts can now be edited
	- Cross-posted status is now checked properly, not via form fields
	- Follow-up posts in the forums now replace WordPress comments (TODO: Add option)
	- Comments via the WordPress comment box now go to the forum if the blog post is cross-posted
- Beginning to kill wpuAbs, and replacing with $phpbbForum. TODO: Don't kill $user unless absolutely necessary
- $phpbbForum handles the current state of the integration. $phpbbForum->enter() and $phpbbForum->leave() MUST be called properly before accessing phpBB features from WordPress
- phpBB is now always run, even in the dashboard. (It was anyway, but as a result of convoluted logic, and couldn't e relied upon)
- phpBB varialbes like phpbb_root_path and $phpEx are now consistently available, everywhere. The only ones missing are $user and $cache -- get those via $phpbbForum or phpbbForum->enter()
- New comment and comments class load up phpBB comments into a format edible to WordPress
- Removed all wpuAbs, apart from err_msg, from ACP
- Removed passVars and passBlockVars from ACP. TODO: stop using block vars for conditionals
- Added new cross-posting options, and re-worded cross-posting options. TODO: Link them to new x-posting code
- Most use of wp-united-connection-settings in wpu-plugin removed, as we can now just use $wpSettings and phpbb_root_path everywhere. TODO: normalise scriptPath everywhere!
- Per-user blogs widgets only registered if per-user blogs are enabled
- new cross-posting options now work
- cross-posting comments auto-link fixed as post_id != topic_id
- Fixed core cache being generated every time
- Cache: Added .htaccess to package
- CSS Magic: Template Voodoo fixed (Width of phpBB in Solostream WP-Genius)
- Improved full page reverse integration: auto-insert a Forum page in WordPress
- Language strings: Using phpBB i18n via phpbbForum for all strings, including in wpu-plugin, template-tags and widgets
- ACP: Settings process page fixed
- ACP: Settings page uses AJAX split to install WP-United Connection
- Plugin: Forum page link filtered so that it always goes directly to the forum
- replaced $scriptPath with new $phpbbForum->url, everywhere. This will also remove a lot of the path guesswork in various places.
- ACP: Fixed error trapping function on PHP4
- Forum page used for simple hdr ftr, not only full page.
- WP-united cache is now purged when the "purge cache" button is clicked in the phpBB ACP. It is also auto-purged when the wizard is run.
- Fixed debug page
- Fixed user mapping tool
- Removed .php for $phpEx in wpu-plugin.php
- Fixed redirection on wp-united reset not working
- Fixed duplicate phpBB displayed when installLevel = uninstalled
- CSS first option not properly defaulted on install or reset -- fixed.
- Fixed login inaccessible when board is disabled
- Completely removed wpuAbs -- yay. Some things may be broken -- lots of testing needed
- Fixed broken WP Login / logout etc. links
- removed $phpbb_sid, etc, and wpuGetxxx from integrator.php
- Plugin: Logout etc. links now showing in dashboard (thanks JG)
- bbCode now works in cross-posted comments
- dates fixed in cross-posting
- Comment counts fixed
- Comment redirection and preventing WordPress post on phpBB cross-posted comments working
- New forum page option on step 1 auto-creates forum link page in WordPress, rather than it being turned on only for reverse template integrations.
- Fixed widget control panes not showing
- Fixed new widget bugs due to new phpB lang
- Fixed ACP link and logout in userinfo widget. However, in general this is failing because $_SID is not getting set, so append_sid() does nothing TODO: check
- Editing posts using quick Edit now updates the cross-posted post too
- Proper fix for editing of profile fields in phpBB & WP in progress:
- Added links to edit phpBB profile or administer user in users.php if that user is integrated 
- Reinstated buffering of profile.php and user-edit.php when that user is integrated
- Added phpbb message to profile.php and user-edit.php if that user is integrated
- Added phpBB general message to users.php
- Fixed settings menu
- removed use of conn settings full_path_to_plugin
- ACP: Removed unnecessary wpu connection parameters that we aren't using any more
- Fixed login debugging not showing up
- CSS Magic now checks filemtime
- Fixed style keys not available in style.php causing cache to be regenerated each time
- Fixed errors in wpu-install.php
- wpu-install.php npow only works for founder users, and uses the phpBB template system
- Fixed error on user registration
- Removed "Header fix" option from integrator and ACP
- Removed "phpBB styles first?" option from ACP, split to two separate advanced options in options.php
- ACP: wpu-plugin copy reports success if filemtime of copied file is equal or newer -- no longer looks for magic variable in header
- Now officially supports subdomains (or even completely different domains with the appropriate mod installed) -- warning wording changed in ACP
- Plugin workarounds can now be enabled (or disabled) with one click on step 5 of the wizard if the install fails.
- WP-United dashboard menu improved: submenus now selected properly
- Fixed various errors in user blog theme panel
- Fixed blog settings panel, renamed to "Your blog details"
- Fixed userblog list last entry calculation and RSS feed lang string
- Various improvements and fixes to CSS Magic after testing cross-browser. More work will need to be done in future releases for 100% theme compatibility in shitty browsers.
- Fixed error on blank permissionsList child arrays
- Forum page is now properly selected on reverse integrated page, even with simple header/footer
- Fixed broken DTD language strings
- User nickname, display_name and nicename are only set once, when the integrated account is created
- Added topic locked / unapproved check for cross-posting comments